\clearpage
\section{Distance-to-Go Estimates}

\label{sec:distance-to-go}

We next compare our depth diversification to the distance-to-go
estimates in the plateau.  Distance-to-go estimates are the type of
heuristics which treat actions as if they have the unit cost. Even under
the presence of zero-cost actions, those estimates can predict the
number of operations required to reach a goal.
While several papers advocates the benefit of this technique, many of
these claims took place in the context of satisficing planning.

\shortciteauthor{benton2010g} proposed an inadmissible technique for temporal
planning where short actions are hidden behind long actions and do not
increase makespan \cite{benton2010g}. Such actions cause so-called
``g-value plateau'', a similar situation caused by 0-cost actions in
sequential planning.  They implemented an inadmissible heuristic
function combined with distance-to-go estimates on top of
Temporal Fast Downward system.  As stated, their method is not
applicable to the optimizing search.
 
% ,wilt2011cost
Similarly, in sequential satisficing planning,
\shortciteauthor{cushing2010cost} showed that
(non-admissibly) treating all actions as unit cost sometimes finds an
optimal plan quickly \cite{cushing2010cost}.
Although it could find an optimal plan by chance, this does not
guarantee the optimality of the solution.
 
Also, a \sota satisficing planner FD/LAMA2011 incorporates
distance-to-go estimates in its iterated search framework. The first
iteration of LAMA uses distance-to-go estimates combined with various
satisficing search enhancements.

\subsection{Distance-to-Go Estimates for Optimal Planning}

Although previous work on distance-to-go estimates assume the
satisficing context,
there is still a possibility to use the same techniques for optimal search.
Let us call a sorting strategy as an \emph{admissible sorting strategy}
when the best first search using the strategy is guaranteed to return an
optimal solution. Although this
is trivial, a sorting strategy is admissible if and only if the 
first sorting criteria $f$ uses an ordinary
admissible heuristics. 
This means that the optimality of the solution is not affected by the
second or later levels of sort criteria, and therefore
it is possible to use an inadmissible
distance-to-go estimate in the second or later levels of sorting criteria of optimal search.
 
Let $\hat{h}$ be a distance-to-go variation of an original heuristic function $h$.
%% redundunt
% Upon computing the estimates, $\hat{h}$ treats all
% actions to have unit costs, while original heuristic function $h$ uses the
% standard action cost.
Multi-heuristic sorting strategies such as $[g+h,h,\hat{h}]$ or $[g+h,\hat{h}]$
are admissible when $h$ is admissible, because the first criteria $f=g+h$ uses
an admissible heuristics based on the normal action costs.
It is even possible to use any inadmissible heuristic function to break
ties. For example, $[g+h^{\lmcut},\ffo]$ is an admissible sorting criteria
because the first sorting criteria $f=g+h^{\lmcut}$ uses an admissible
\lmcut heuristics. Its second sorting criteria, distance-to-go FF
heuristics, does not affect the admissibility of this sorting criteria.

An obvious flaw in such a strategy is the cost of computing additional
heuristic estimates. Using different heuristics (e.g. $\ffo$) obviously introduces such an
overhead. Using distance-to-go estimates $\hat{h}$ along with
original heuristics $h$ could be optimized so that they share part of
the computation, but still should incur some overhead.

\subsection{Evaluating Distance-to-go Estimates}

We tested various admissible sorting strategies on IPC domains and zerocost domains.
% on zerocost domains  where tiebreaking strategies have the large impact.
The configurations are listed in \reftbl{list:distance-configs}. 
In all configurations, the first sorting criterion is the $f=g+h$ value
where $h$ is an admissible heuristics using the normal cost calculation, either \lmcut or \mands.
As the second or later sorting criteria,
we tested $\hat{h}$ of original $h$, as well as a distance-to-go variation of FF
heuristic ($\hat{h}^{\ff}$).
% , and a distance-to-go variation of
% GoalCount heuristic ($\hat{h}^{\text{GoalCount}}$) which is added to
% represent an uninformative but fast inadmissible heuristic function with
% least additional overhead.
We also added configurations with the depth metric within
$\plateau{f,\hat{h}^{\text{\ff}}}$.

\begin{table}[htbp]
 \centering
 \[
 \begin{array}{lcll}
  (1)\, [h+g, & h,                           &L] \\\relax
  (2)\, [h+g, & h,     \quad   \hat{h},      &L] \\\relax
  (3)\, [h+g, & \hat{h},                     &L] \\\relax
  (4)\, [h+g, & \hat{h}^{\ff},               &L] \\\relax
  % not include it unless the reviewer complained. 
  % (5)\, [h+g, & \hat{h}^{\text{GoalCount}},  &L] \\\relax
  (5)\, [h+g, & h, \depth, &L] \\\relax
  (6)\, [h+g, & \hat{h}^{\text{FF}}, \depth, &L] \\\relax
 \end{array}  
 \]
 \caption{Configurations being compared in this section. $h$ is
 one of $\braces{\lmcut, \mands}$, and $L$ is one of the last-resort
 tiebreaking strategies $\fifo,\lifo,$ or $\ro$. }
 \label{list:distance-configs}
\end{table}

% $[h^{\lmcut}+g,\hat{h}^{\mbox{LMcount}},\fifo]$,

The summary results are shown in \reftbl{tbl:dtg-summary}. For
comparison, we also show the results in the previous sections.
Detailed per-domain results are shown in
\reftbl{tbl:dtg-lmcut-zero}-\reftbl{tbl:dtg-mands-ipc}.

In Zerocost domains, we see that $\hat{h}$-tiebreaking outperforms $h$-tiebreaking in both \lmcut and \mands. Also,
combining $h$ and $\hat{h}$ can further improve the performance of \lmcut, while the results are comparable when
the main heuristics function $h$ is \mands.  Yet more surprisingly, using $\ffo$ results in an order of magnitude
larger coverage in both \lmcut and \mands. Thus, when the depth metric is not used, the best configuration is those
which uses $\ffo$.  Finally, depth metric further improves the performance of this best non-depth configuration
using $\ffo$.  The coverage increased in both $h=h^\lmcut$ (\fifo: $337\rightarrow 340$, \lifo: $340\rightarrow
342$, \ro: $341\rightarrow 344.3$) and $h=h^\mands$ (\fifo: $336\rightarrow 337$, \lifo: $331\rightarrow
333$). When the last-resort tiebreaking was \ro and the heuristics is \mands, $[f,\ffo,\depth,\ro]$ did not improve
over $[f,\ffo,\ro]$, but the coverage difference was small ($337.9\rightarrow 337.6$) and it shows a slightly
better robustness (smaller variance: $2.1\rightarrow 1.3$).

In standard IPC benchmark instances, the cost of additional computation of
$\hat{h}$ or $\ffo$ tends to harm the overall performance.
Therefore, the best result using \lmcut was
$[f,h,\depth,\lifo]$ which uses depth and does not impose the cost of
additional heuristics, and the best result using \mands
was $[f,h,\lifo]$ which impose the least overhead on the fast expansion offered by
\mands heuristics.
% However, 
% zerocost domains in this standard benchmark set (Openstacks and
% Cybersec) has each shown a significant speedup achieved by these distance-to-go estimates
%  (\reftbl{tbl:dtg-lmcut-ipc} and \reftbl{tbl:dtg-mands-ipc}).

The performance degradation in the positive cost domains are not
critical at all because we can simply switch the behavior before the
search depending on whether the domain contains zerocost actions or not.
Coverage results in \reftbl{tbl:dtg-summary-sum} shows the total of
zerocost and benchmark domains. The dynamic configuration which switches
the behavior achieves the highest coverage.

% While these multi-heuristic strategies did not improve the perfomance in
% the positive cost domains because the final plateaus are small, a simple
% method which 

Overall, these results also strengthen our claim that $h$-based
tiebreaking is not necessarily the ``rule of the thumb'' in some
domains, as already discussed in \refsec{sec:noh}. In zerocost domains,
using a distance-to-go version of an inadmissible heuristic function for
tiebreaking is more effective. Also, combining the depth metric with
such an inadmissible heuristics is also effective.


\begin{table}[htbp]
 \centering
 \input{tables/8-1-summary}
 \caption{
 Summary Results: Coverage comparison (the number
 of instances solved in 5min, 4GB) between several sorting strategies.
 }
 \label{tbl:dtg-summary}
\end{table}

\begin{table}[htbp]
 \centering \input{tables/8-1-summary-sum}
 \caption{ Summary Results:
 Coverage comparison, the total of IPC domains and Zerocost domains (the
 number of instances solved in 5min, 4GB) between several sorting
 strategies, plus a dynamic configuration strategy which selects the
 right behavior checking whether zero-cost actions exist.  }
 \label{tbl:dtg-summary-sum}
\end{table}

\setlength{\tabcolsep}{0.1em}

\begin{table}[htbp]
 {
 \centering
 \input{tables/8-zero-lmcut}
 \caption{
 Coverage results with \textbf{ \lmcut for computing $f$ and inadmissible distance-to-go heuristics for tiebreaking, on 620 zerocost instances}. We highlight the best results when the difference between the maximum and the minimum coverage exceeds 2.
 }
 \label{tbl:dtg-lmcut-zero}
 }
\end{table}
\begin{table}[htbp]
 {
 \centering
 \input{tables/8-zero-mands}
 \caption{
 Coverage results with \textbf{ \mands for computing $f$ and inadmissible distance-to-go heuristics for tiebreaking, on 620 zerocost instances}. We highlight the best results when the difference between the maximum and the minimum coverage exceeds 2.
 }
 \label{tbl:dtg-mands-zero}
 }
\end{table}

\begin{table}[htbp]
 {
 \centering
 \input{tables/8-ipc-lmcut}
 \caption{
 Coverage results with \textbf{ \lmcut for computing $f$ and inadmissible distance-to-go heuristics for tiebreaking, on 1104 standard IPC benchmark instances}. We highlight the best results when the difference between the maximum and the minimum coverage exceeds 2.
 }
 \label{tbl:dtg-lmcut-ipc}
 }
\end{table}
\begin{table}[htbp]
 {
 \centering
 \input{tables/8-ipc-mands}
 \caption{
 Coverage results with \textbf{ \mands for computing $f$ and inadmissible distance-to-go heuristics for tiebreaking, on 1104 standard IPC benchmark instances}. We highlight the best results when the difference between the maximum and the minimum coverage exceeds 2.
 }
 \label{tbl:dtg-mands-ipc} }
\end{table}

